FROM wso2-appcloud/carbon:4.2.0-base 

ENV CARBON_APP_ZIP ARTIFACT_NAME 
ENV CARBON_APP_NAME ARTIFACT_DIR 
ENV UPLOAD_PATH /tmp/
ENV SERVER_PATH /mnt/

COPY "$CARBON_APP_ZIP" "$UPLOAD_PATH/"
RUN unzip -q "$UPLOAD_PATH/$CARBON_APP_ZIP" -d "$SERVER_PATH"

CMD ["sh", "-c", "${SERVER_PATH}/${CARBON_APP_NAME}/bin/wso2server.sh"]

